import{r,c,a as t,b as _,w as p,d as v,v as m,t as y,F as E,e as s,f as b,u as C,g as F,o as w}from"./index-DLDAcI2r.js";const L={class:"login-container"},T={class:"login-card"},V=["disabled"],x={class:"forgot-password"},B={class:"register-link"},N={key:0,class:"modal-overlay"},U={class:"modal"},q=["disabled"],P={__name:"Login",setup(M){const z=F(),l=r(""),n=r(""),i=r(!1),d=r(!1),u=r("");r("");const f=C();function g(a){return/\S+@\S+\.\S+/.test(a)}async function h(){if(!l.value||!n.value){s.error("Lütfen e-posta ve şifreyi girin!");return}if(!g(l.value)){s.error("Geçerli bir e-posta adresi girin!");return}i.value=!0;const a=await b.post("/api/auth/login",JSON.stringify({email:l.value,password:n.value})),e=await(a==null?void 0:a.data);(a==null?void 0:a.status)==200?(s.success("Giriş başarılı! Yönlendiriliyorsunuz..."),setTimeout(()=>{f.push("/"),z.commit("setToken",e.token)},3e3)):e&&s.error(e.message||"Giriş başarısız!"),i.value=!1}function k(){d.value=!0}async function S(){if(!g(u.value)){s.error("Geçerli bir e-posta adresi girin!");return}i.value=!0;const a=await b.post("/api/auth/forgot-password",JSON.stringify({email:u.value})),e=await(a==null?void 0:a.data);(a==null?void 0:a.status)==200?(s.success("Şifre sıfırlama bağlantısı gönderildi! Anasayfaya yönlendiriliyorsunuz..."),setTimeout(()=>{f.push("/")},3e3)):e&&s.error(e.message||"Bir hata oluştu!"),i.value=!1}function G(){f.push("/register")}return(a,e)=>(w(),c(E,null,[t("div",L,[t("div",T,[e[4]||(e[4]=t("h2",null,"Giriş Yap",-1)),e[5]||(e[5]=t("p",null,"Hoş geldiniz! Lütfen giriş yapınız.",-1)),t("form",{onSubmit:p(h,["prevent"])},[v(t("input",{type:"email","onUpdate:modelValue":e[0]||(e[0]=o=>l.value=o),placeholder:"E-Posta",required:""},null,512),[[m,l.value,void 0,{trim:!0}]]),v(t("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=o=>n.value=o),placeholder:"Şifre",required:""},null,512),[[m,n.value]]),t("button",{type:"submit",disabled:i.value},y(i.value?"Giriş yapılıyor...":"Giriş Yap"),9,V)],32),t("div",x,[t("a",{href:"#",onClick:p(k,["prevent"])},"Şifrenizi mi unuttunuz?")]),t("div",B,[t("a",{href:"#",onClick:p(G,["prevent"])},"Kayıt Ol")])])]),d.value?(w(),c("div",N,[t("div",U,[t("button",{class:"close-btn",onClick:e[2]||(e[2]=o=>d.value=!1)},"×"),e[6]||(e[6]=t("h2",null,"Şifre Sıfırlama",-1)),e[7]||(e[7]=t("p",null,"Lütfen e-posta adresinizi girin. Size sıfırlama bağlantısı göndereceğiz.",-1)),v(t("input",{type:"email",name:"forgotEmail","onUpdate:modelValue":e[3]||(e[3]=o=>u.value=o),placeholder:"E-posta adresiniz",required:""},null,512),[[m,u.value,void 0,{trim:!0}]]),t("button",{onClick:S,disabled:i.value},y(i.value?"Gönderiliyor...":"Gönder"),9,q)])])):_("",!0)],64))}};export{P as default};
