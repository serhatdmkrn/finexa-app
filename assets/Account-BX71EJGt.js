import{r as n,c as w,a,w as m,d as u,v as p,t as y,u as b,o as k,e as o,f as _}from"./index-BHizeVJQ.js";const g={class:"reset-password-container"},h={class:"reset-password-box"},z=["disabled"],P=["disabled"],x=["disabled"],A=["disabled"],S={__name:"Account",setup(B){const f=b(),l=n(""),t=n(""),d=n(""),s=n(!1);function v(r){return/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&._-])[A-Za-z\d@$!%*?&._-]{8,}$/.test(r)}async function c(){if(t.value!==d.value){o.error("Yeni Şifreler eşleşmiyor!");return}if(!v(t.value)){o.warning("Şifreniz en az 8 karakter, büyük/küçük harf, rakam ve özel karakter içermelidir!");return}s.value=!0;try{const r=await _.post("/api/auth/change-password",JSON.stringify({currentPassword:l.value,newPassword:t.value})),e=await r.data;r.status==200?(o.success("Şifre değişikliği başarılı! Anasayfaya Yönlendiriliyorsunuz..."),setTimeout(()=>{f.push("/")},3e3)):o.error(e.message||"Şifre değişikliği başarısız!")}catch(r){o.error(r.response.data.message||"Bir hata oluştu!")}finally{s.value=!1}}return(r,e)=>(k(),w("div",g,[a("div",h,[e[3]||(e[3]=a("h2",null,"Hesabım",-1)),e[4]||(e[4]=a("p",null,"Mevcut şifrenizi ve yeni şifrenizi girin:",-1)),a("form",{onSubmit:m(c,["prevent"])},[u(a("input",{type:"password","onUpdate:modelValue":e[0]||(e[0]=i=>l.value=i),placeholder:"Mevcut Şifre",disabled:s.value,required:""},null,8,z),[[p,l.value]]),u(a("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=i=>t.value=i),placeholder:"Yeni Şifre",disabled:s.value,required:""},null,8,P),[[p,t.value]]),u(a("input",{type:"password","onUpdate:modelValue":e[2]||(e[2]=i=>d.value=i),placeholder:"Yeni Şifre (Tekrar)",disabled:s.value,required:""},null,8,x),[[p,d.value]]),a("button",{type:"submit",disabled:s.value},y(s.value?"Değiştiriliyor...":"Şifreyi Güncelle"),9,A)],32)])]))}};export{S as default};
