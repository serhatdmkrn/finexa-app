import{r,c,a as s,b as _,w as f,d as v,v as m,t as y,F as E,e as i,f as b,u as C,g as F,o as w}from"./index-Ct9-uJkL.js";const L={class:"login-container"},T={class:"login-card"},V=["disabled"],x={class:"forgot-password"},B={class:"register-link"},N={key:0,class:"modal-overlay"},U={class:"modal"},q=["disabled"],P={__name:"Login",setup(M){const z=F(),l=r(""),n=r(""),t=r(!1),d=r(!1),u=r("");r("");const p=C();function g(a){return/\S+@\S+\.\S+/.test(a)}async function h(){if(!l.value||!n.value){i.error("Lütfen e-posta ve şifreyi girin!");return}if(!g(l.value)){i.error("Geçerli bir e-posta adresi girin!");return}t.value=!0;const a=await b.post("/api/auth/login",JSON.stringify({email:l.value,password:n.value})),e=await a.data;a.status==200?(i.success("Giriş başarılı! Yönlendiriliyorsunuz..."),setTimeout(()=>{p.push("/"),z.commit("setToken",e.token)},3e3)):i.error(e.message||"Giriş başarısız!"),t.value=!1}function k(){d.value=!0}async function S(){if(!g(u.value)){i.error("Geçerli bir e-posta adresi girin!");return}t.value=!0;const a=await b.post("/api/auth/forgot-password",JSON.stringify({email:u.value})),e=await a.data;a.status==200?(i.success("Şifre sıfırlama bağlantısı gönderildi! Anasayfaya yönlendiriliyorsunuz..."),setTimeout(()=>{p.push("/")},3e3)):i.error(e.message||"Bir hata oluştu!"),t.value=!1}function G(){p.push("/register")}return(a,e)=>(w(),c(E,null,[s("div",L,[s("div",T,[e[4]||(e[4]=s("h2",null,"Giriş Yap",-1)),e[5]||(e[5]=s("p",null,"Hoş geldiniz! Lütfen giriş yapınız.",-1)),s("form",{onSubmit:f(h,["prevent"])},[v(s("input",{type:"email","onUpdate:modelValue":e[0]||(e[0]=o=>l.value=o),placeholder:"E-Posta",required:""},null,512),[[m,l.value,void 0,{trim:!0}]]),v(s("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=o=>n.value=o),placeholder:"Şifre",required:""},null,512),[[m,n.value]]),s("button",{type:"submit",disabled:t.value},y(t.value?"Giriş yapılıyor...":"Giriş Yap"),9,V)],32),s("div",x,[s("a",{href:"#",onClick:f(k,["prevent"])},"Şifrenizi mi unuttunuz?")]),s("div",B,[s("a",{href:"#",onClick:f(G,["prevent"])},"Kayıt Ol")])])]),d.value?(w(),c("div",N,[s("div",U,[s("button",{class:"close-btn",onClick:e[2]||(e[2]=o=>d.value=!1)},"×"),e[6]||(e[6]=s("h2",null,"Şifre Sıfırlama",-1)),e[7]||(e[7]=s("p",null,"Lütfen e-posta adresinizi girin. Size sıfırlama bağlantısı göndereceğiz.",-1)),v(s("input",{type:"email",name:"forgotEmail","onUpdate:modelValue":e[3]||(e[3]=o=>u.value=o),placeholder:"E-posta adresiniz",required:""},null,512),[[m,u.value,void 0,{trim:!0}]]),s("button",{onClick:S,disabled:t.value},y(t.value?"Gönderiliyor...":"Gönder"),9,q)])])):_("",!0)],64))}};export{P as default};
