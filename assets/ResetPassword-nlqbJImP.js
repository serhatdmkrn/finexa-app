import{r as i,i as w,j as k,e as t,c as y,a as r,w as b,d,v as f,t as g,u as z,o as _,f as h}from"./index-DLQ5kwuq.js";const P={class:"reset-password-container"},B={class:"reset-password-box"},S=["disabled"],A={__name:"ResetPassword",setup(x){const s=i(""),l=i(""),o=i(!1),n=i(""),p=z(),v=k();w(()=>{new URLSearchParams(window.location.search),n.value=v.params.token||"",n.value||(t.error("Token bulunamadı! Bağlantınızı kontrol edin."),messageColor.value="red")});function m(a){return/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&._-])[A-Za-z\d@$!%*?&._-]{8,}$/.test(a)}async function c(){if(!n.value){t.error("Token bulunamadı! Bağlantınızı kontrol edin.");return}if(s.value!==l.value){t.error("Şifreler eşleşmiyor!");return}if(!m(s.value)){t.warning("Şifreniz en az 8 karakter, büyük/küçük harf, rakam ve özel karakter içermelidir!"),messageColor.value="red";return}o.value=!0;const a=await h.post("/api/Auth/reset-password",JSON.stringify({token:n.value,newPassword:s.value})),e=a==null?void 0:a.data;(a==null?void 0:a.status)==200?(t.success("Şifreniz başarıyla yenilendi! Yönlendiriliyorsunuz..."),setTimeout(()=>{p.push("/login")},3e3)):e&&t.error(e.message||"Bir hata oluştu!"),o.value=!1}return(a,e)=>(_(),y("div",P,[r("div",B,[e[2]||(e[2]=r("h2",null,"Şifre Sıfırlama",-1)),e[3]||(e[3]=r("p",null,"Yeni şifrenizi girin:",-1)),r("form",{onSubmit:b(c,["prevent"])},[d(r("input",{type:"password","onUpdate:modelValue":e[0]||(e[0]=u=>s.value=u),placeholder:"Yeni Şifre",required:""},null,512),[[f,s.value]]),d(r("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=u=>l.value=u),placeholder:"Yeni Şifre (Tekrar)",required:""},null,512),[[f,l.value]]),r("button",{type:"submit",disabled:o.value},g(o.value?"Değiştiriliyor...":"Değiştir"),9,S)],32)])]))}};export{A as default};
