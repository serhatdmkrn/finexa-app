import{r as i,i as w,j as k,e as r,c as y,a,w as b,d,v as p,t as g,u as z,o as _,f as h}from"./index-D-X0lIMx.js";const P={class:"reset-password-container"},B={class:"reset-password-box"},S=["disabled"],A={__name:"ResetPassword",setup(x){const s=i(""),l=i(""),o=i(!1),n=i(""),f=z(),v=k();w(()=>{new URLSearchParams(window.location.search),n.value=v.params.token||"",n.value||(r.error("Token bulunamadı! Bağlantınızı kontrol edin."),messageColor.value="red")});function m(t){return/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&._-])[A-Za-z\d@$!%*?&._-]{8,}$/.test(t)}async function c(){if(!n.value){r.error("Token bulunamadı! Bağlantınızı kontrol edin.");return}if(s.value!==l.value){r.error("Şifreler eşleşmiyor!");return}if(!m(s.value)){r.warning("Şifreniz en az 8 karakter, büyük/küçük harf, rakam ve özel karakter içermelidir!"),messageColor.value="red";return}o.value=!0;const t=await h.post("/api/Auth/reset-password",JSON.stringify({token:n.value,newPassword:s.value})),e=t.data;t.status==200?(r.success("Şifreniz başarıyla yenilendi! Yönlendiriliyorsunuz..."),setTimeout(()=>{f.push("/login")},3e3)):r.error(e.message||"Bir hata oluştu!"),o.value=!1}return(t,e)=>(_(),y("div",P,[a("div",B,[e[2]||(e[2]=a("h2",null,"Şifre Sıfırlama",-1)),e[3]||(e[3]=a("p",null,"Yeni şifrenizi girin:",-1)),a("form",{onSubmit:b(c,["prevent"])},[d(a("input",{type:"password","onUpdate:modelValue":e[0]||(e[0]=u=>s.value=u),placeholder:"Yeni Şifre",required:""},null,512),[[p,s.value]]),d(a("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=u=>l.value=u),placeholder:"Yeni Şifre (Tekrar)",required:""},null,512),[[p,l.value]]),a("button",{type:"submit",disabled:o.value},g(o.value?"Değiştiriliyor...":"Değiştir"),9,S)],32)])]))}};export{A as default};
