import{r as i,i as w,j as k,e as a,c as y,a as s,w as b,d,v as p,t as g,u as z,o as h,f as _}from"./index-ClLKYOBA.js";const P={class:"reset-password-container"},B={class:"reset-password-box"},S=["disabled"],A={__name:"ResetPassword",setup(x){const t=i(""),l=i(""),o=i(!1),n=i(""),f=z(),v=k();w(()=>{new URLSearchParams(window.location.search),n.value=v.params.token||"",n.value||(a.error("Token bulunamadı! Bağlantınızı kontrol edin."),messageColor.value="red")});function m(r){return/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&._-])[A-Za-z\d@$!%*?&._-]{8,}$/.test(r)}async function c(){if(!n.value){a.error("Token bulunamadı! Bağlantınızı kontrol edin.");return}if(t.value!==l.value){a.error("Şifreler eşleşmiyor!");return}if(!m(t.value)){a.warning("Şifreniz en az 8 karakter, büyük/küçük harf, rakam ve özel karakter içermelidir!"),messageColor.value="red";return}o.value=!0;try{const r=await _.post("/api/Auth/reset-password",JSON.stringify({token:n.value,newPassword:t.value})),e=r.data;r.status==200?(a.success("Şifreniz başarıyla yenilendi! Yönlendiriliyorsunuz..."),setTimeout(()=>{f.push("/login")},3e3)):a.error(e.message||"Bir hata oluştu!")}catch(r){a.error(r.response.data.message||"İşlem sırasında bir hata oluştu.")}finally{o.value=!1}}return(r,e)=>(h(),y("div",P,[s("div",B,[e[2]||(e[2]=s("h2",null,"Şifre Sıfırlama",-1)),e[3]||(e[3]=s("p",null,"Yeni şifrenizi girin:",-1)),s("form",{onSubmit:b(c,["prevent"])},[d(s("input",{type:"password","onUpdate:modelValue":e[0]||(e[0]=u=>t.value=u),placeholder:"Yeni Şifre",required:""},null,512),[[p,t.value]]),d(s("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=u=>l.value=u),placeholder:"Yeni Şifre (Tekrar)",required:""},null,512),[[p,l.value]]),s("button",{type:"submit",disabled:o.value},g(o.value?"Değiştiriliyor...":"Değiştir"),9,S)],32)])]))}};export{A as default};
