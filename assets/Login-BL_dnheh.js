import{r as o,c as g,a,b as _,w as f,d as v,v as m,t as y,F as B,e as t,f as b,u as E,g as C,o as w}from"./index-IVA8Gg9E.js";const F={class:"login-container"},L={class:"login-card"},T=["disabled"],V={class:"forgot-password"},x={class:"register-link"},N={key:0,class:"modal-overlay"},U={class:"modal"},q=["disabled"],P={__name:"Login",setup(M){const h=C(),l=o(""),n=o(""),r=o(!1),d=o(!1),u=o("");o("");const p=E();function c(s){return/\S+@\S+\.\S+/.test(s)}async function z(){if(!l.value||!n.value){t.error("Lütfen e-posta ve şifreyi girin!");return}if(!c(l.value)){t.error("Geçerli bir e-posta adresi girin!");return}r.value=!0;try{const s=await b.post("/api/auth/login",JSON.stringify({email:l.value,password:n.value})),e=await s.data;s.status==200?(t.success("Giriş başarılı! Yönlendiriliyorsunuz..."),setTimeout(()=>{p.push("/"),h.commit("setToken",e.token)},3e3)):t.error(e.message||"Giriş başarısız!")}catch(s){t.error(s.response.data.message||"Bir hata oluştu!")}finally{r.value=!1}}function k(){d.value=!0}async function S(){if(!c(u.value)){t.error("Geçerli bir e-posta adresi girin!");return}r.value=!0;try{const s=await b.post("/api/auth/forgot-password",JSON.stringify({email:u.value})),e=await s.data;s.status==200?(t.success("Şifre sıfırlama bağlantısı gönderildi! Anasayfaya yönlendiriliyorsunuz..."),setTimeout(()=>{p.push("/")},3e3)):t.error(e.message||"Bir hata oluştu!")}catch(s){t.error(s.response.data.message||"Bir hata oluştu!")}finally{r.value=!1}}function G(){p.push("/register")}return(s,e)=>(w(),g(B,null,[a("div",F,[a("div",L,[e[4]||(e[4]=a("h2",null,"Giriş Yap",-1)),e[5]||(e[5]=a("p",null,"Hoş geldiniz! Lütfen giriş yapınız.",-1)),a("form",{onSubmit:f(z,["prevent"])},[v(a("input",{type:"email","onUpdate:modelValue":e[0]||(e[0]=i=>l.value=i),placeholder:"E-Posta",required:""},null,512),[[m,l.value,void 0,{trim:!0}]]),v(a("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=i=>n.value=i),placeholder:"Şifre",required:""},null,512),[[m,n.value]]),a("button",{type:"submit",disabled:r.value},y(r.value?"Giriş yapılıyor...":"Giriş Yap"),9,T)],32),a("div",V,[a("a",{href:"#",onClick:f(k,["prevent"])},"Şifrenizi mi unuttunuz?")]),a("div",x,[a("a",{href:"#",onClick:f(G,["prevent"])},"Kayıt Ol")])])]),d.value?(w(),g("div",N,[a("div",U,[a("button",{class:"close-btn",onClick:e[2]||(e[2]=i=>d.value=!1)},"×"),e[6]||(e[6]=a("h2",null,"Şifre Sıfırlama",-1)),e[7]||(e[7]=a("p",null,"Lütfen e-posta adresinizi girin. Size sıfırlama bağlantısı göndereceğiz.",-1)),v(a("input",{type:"email",name:"forgotEmail","onUpdate:modelValue":e[3]||(e[3]=i=>u.value=i),placeholder:"E-posta adresiniz",required:""},null,512),[[m,u.value,void 0,{trim:!0}]]),a("button",{onClick:S,disabled:r.value},y(r.value?"Gönderiliyor...":"Gönder"),9,q)])])):_("",!0)],64))}};export{P as default};
